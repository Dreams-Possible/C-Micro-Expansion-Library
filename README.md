# C-Micro-Expansion-Library

Cå¾®å‹æ‰©å±•åº“ - ä¸€ä¸ªè½»é‡çº§çš„Cè¯­è¨€å®ç”¨å·¥å…·åº“

## é¡¹ç›®ç®€ä»‹

C-Micro-Expansion-Library (CMEL) æ˜¯ä¸€ä¸ªä¸“ä¸ºåµŒå…¥å¼ç³»ç»Ÿå’Œèµ„æºå—é™ç¯å¢ƒè®¾è®¡çš„è½»é‡çº§Cè¯­è¨€æ‰©å±•åº“ã€‚è¯¥åº“æä¾›äº†ä¸€ç³»åˆ—å¸¸ç”¨çš„æ•°æ®ç»“æ„å’Œç®—æ³•å®ç°ï¼Œå…·æœ‰å†…å­˜å ç”¨å°ã€æ€§èƒ½é«˜æ•ˆã€æ¥å£ç®€æ´çš„ç‰¹ç‚¹ã€‚

## ç‰¹æ€§

- ğŸš€ **è½»é‡çº§è®¾è®¡** - ä¸“ä¸ºåµŒå…¥å¼ç³»ç»Ÿå’Œèµ„æºå—é™ç¯å¢ƒä¼˜åŒ–
- ğŸ“¦ **æ¨¡å—åŒ–æ¶æ„** - å„æ¨¡å—ç‹¬ç«‹ï¼Œå¯æŒ‰éœ€ä½¿ç”¨
- ğŸ”§ **ç®€æ´API** - æ˜“äºå­¦ä¹ å’Œä½¿ç”¨çš„æ¥å£è®¾è®¡
- ğŸ›¡ï¸ **å†…å­˜å®‰å…¨** - æä¾›å†…å­˜ç®¡ç†ä¿æŠ¤æœºåˆ¶
- ğŸ“š **å®Œæ•´æ–‡æ¡£** - è¯¦ç»†çš„å‡½æ•°è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹

## æ¨¡å—ä»‹ç»

### 1. é“¾å¼æ•°æ®ç»“æ„ (cm_chain)

æä¾›ç»Ÿä¸€çš„åŒå‘é“¾è¡¨å®ç°ï¼Œæ”¯æŒçµæ´»çš„èŠ‚ç‚¹æ“ä½œå’Œéå†ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- ç»Ÿä¸€åŒå‘é“¾è¡¨ç»“æ„
  - åˆå§‹åŒ–ã€æ’å…¥ã€æ·»åŠ ã€åˆ é™¤èŠ‚ç‚¹
  - é“¾è¡¨è®¡æ•°å’Œéå†
  - å†…å­˜å®‰å…¨é‡Šæ”¾
  - å¤´å°¾èŠ‚ç‚¹è·å–
  - ç´¢å¼•æ’å…¥æ”¯æŒ
  - é“¾è¡¨ç»“æ„æ˜¾ç¤º

### 2. å‡ ä½•è®¡ç®—æ¨¡å— (cm_geo)

æä¾›2Då‡ ä½•è®¡ç®—åŠŸèƒ½ï¼Œé€‚ç”¨äºè·¯å¾„è§„åˆ’ã€å›¾å½¢å¤„ç†ç­‰åœºæ™¯ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- 2Dç‚¹è·ç¦»è®¡ç®—
  - è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»
- æ–œç‡è®¡ç®—
  - è®¡ç®—ä¸¤ç‚¹è¿çº¿çš„æ–œç‡
  - å‚ç›´çº¿æ–œç‡å¤„ç†
- æ›²ç‡è®¡ç®—
  - è®¡ç®—ä¸‰ç‚¹æ„æˆçš„æ›²çº¿æ›²ç‡
  - åˆ¤æ–­å·¦è½¬/å³è½¬æ–¹å‘
  - å…±çº¿æ£€æµ‹

### 3. å‘½ä»¤è¡Œæ¥å£ (cm_cli)

è½»é‡çº§å‘½ä»¤è¡Œè§£æå™¨ï¼Œæ”¯æŒå‘½ä»¤æ³¨å†Œå’Œæ‰§è¡Œã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- å‘½ä»¤æ³¨å†Œå’Œæ³¨é”€
- å‘½ä»¤è¡Œå‚æ•°è§£æ
- å‘½ä»¤æ‰§è¡Œè°ƒåº¦
- äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢

### 4. PIDæ§åˆ¶å™¨ (cm_pid)

æä¾›ä½ç½®å¼å’Œå¢é‡å¼PIDæ§åˆ¶å™¨å®ç°ï¼Œé€‚ç”¨äºä¸åŒçš„æ§åˆ¶ç³»ç»Ÿéœ€æ±‚ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- ä½ç½®å¼PIDæ§åˆ¶å™¨
  - å®Œæ•´çš„PIDæ§åˆ¶ç®—æ³•
  - å‚æ•°ç‹¬ç«‹é…ç½® (Kp, Ki, Kd)
  - è¾“å‡ºé™å¹…ä¿æŠ¤
  - ç§¯åˆ†æŠ—é¥±å’Œå¤„ç†
  - ç›®æ ‡å€¼è®¾ç½®å’Œé‡ç½®åŠŸèƒ½

- ä½ç½®å¼PDæ§åˆ¶å™¨
  - ç®€åŒ–ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸éœ€è¦ç§¯åˆ†é¡¹çš„åœºæ™¯
  - å‚æ•°é…ç½® (Kp, Kd)
  - è¾“å‡ºé™å¹…æ”¯æŒ

- å¢é‡å¼PIDæ§åˆ¶å™¨
  - å¢é‡å¼æ§åˆ¶ç®—æ³•ï¼Œé€‚ç”¨äºæ‰§è¡Œå™¨æ§åˆ¶
  - å‚æ•°ç‹¬ç«‹é…ç½® (Kp, Ki, Kd)
  - è¾“å‡ºé™å¹…ä¿æŠ¤
  - é¿å…ç§¯åˆ†é¥±å’Œé—®é¢˜

- å¢é‡å¼PIæ§åˆ¶å™¨
  - ç®€åŒ–ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸éœ€è¦å¾®åˆ†é¡¹çš„åœºæ™¯
  - å‚æ•°é…ç½® (Kp, Ki)
  - è¾“å‡ºé™å¹…æ”¯æŒ

## å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘ä½¿ç”¨

```c
#include "cmel/cm_chain.h"
#include "cmel/cm_geo.h"
#include "cmel/cm_cli.h"
#include "cmel/cm_pid.h"

// ä½¿ç”¨ç»Ÿä¸€é“¾è¡¨ç¤ºä¾‹
cm_chain_t* list = cm_chain_init(data);
cm_chain_add_tail(list, new_data);
uint32_t count = cm_chain_count(list);

// ä½¿ç”¨å‡ ä½•è®¡ç®—ç¤ºä¾‹
cm_geo_2dp_t p1 = {0.0, 0.0};
cm_geo_2dp_t p2 = {3.0, 4.0};
cm_geo_2dp_t p3 = {6.0, 0.0};
float distance = cm_geo_2dp_dist(p1, p2);
float slope = cm_geo_calcu_slope(p1, p2);
uint8_t direction;
float curvature = cm_geo_calcu_curva(p1, p2, p3, &direction);

// ä½¿ç”¨CLIç¤ºä¾‹
cm_cli_t* cli = cm_cli_init();
cm_cli_regist(cli, "test", test_command);

// ä½¿ç”¨ä½ç½®å¼PIDæ§åˆ¶å™¨ç¤ºä¾‹
cm_pid_ppid_t* ppid = cm_pid_ppid_init();
cm_pid_ppid_set_target(ppid, 100.0);
cm_pid_ppid_set_kp(ppid, 1.0);
cm_pid_ppid_set_ki(ppid, 0.1);
cm_pid_ppid_set_kd(ppid, 0.05);
cm_pid_ppid_set_limit(ppid, -50.0, 50.0);
float output = cm_pid_ppid_comput(ppid, current_value, current_time);

// ä½¿ç”¨å¢é‡å¼PIDæ§åˆ¶å™¨ç¤ºä¾‹
cm_pid_ipid_t* ipid = cm_pid_ipid_init();
cm_pid_ipid_set_target(ipid, 100.0);
cm_pid_ipid_set_kp(ipid, 0.8);
cm_pid_ipid_set_ki(ipid, 0.05);
cm_pid_ipid_set_kd(ipid, 0.02);
cm_pid_ipid_set_limit(ipid, -10.0, 10.0);
float increment = cm_pid_ipid_comput(ipid, current_value, current_time);
```

### æ„å»ºè¯´æ˜

å°† `cmel/` ç›®å½•æ·»åŠ åˆ°æ‚¨çš„ç¼–è¯‘è·¯å¾„ä¸­ï¼Œå¹¶é“¾æ¥ç›¸åº”çš„æºæ–‡ä»¶ï¼š

```bash
gcc -I./cmel your_program.c cmel/cm_chain.c cmel/cm_geo.c cmel/cm_cli.c cmel/cm_pid.c -o your_program
```

## APIæ–‡æ¡£

### é“¾å¼æ•°æ®ç»“æ„

#### ç»Ÿä¸€é“¾è¡¨æ“ä½œ
- `cm_chain_init()` - åˆå§‹åŒ–é“¾è¡¨èŠ‚ç‚¹
- `cm_chain_get_head()` - è·å–é“¾è¡¨å¤´èŠ‚ç‚¹
- `cm_chain_get_tail()` - è·å–é“¾è¡¨å°¾èŠ‚ç‚¹
- `cm_chain_count()` - è®¡ç®—é“¾è¡¨èŠ‚ç‚¹æ•°é‡
- `cm_chain_add_head()` - å‘é“¾è¡¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹
- `cm_chain_add_tail()` - å‘é“¾è¡¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹
- `cm_chain_insert()` - åœ¨æŒ‡å®šèŠ‚ç‚¹åæ’å…¥æ–°èŠ‚ç‚¹
- `cm_chain_insert_index()` - æŒ‰ç´¢å¼•æ’å…¥æ–°èŠ‚ç‚¹
- `cm_chain_delete()` - åˆ é™¤æŒ‡å®šèŠ‚ç‚¹
- `cm_chain_deinit()` - é‡Šæ”¾æ•´ä¸ªé“¾è¡¨
- `cm_chain_show()` - æ˜¾ç¤ºé“¾è¡¨ç»“æ„ä¿¡æ¯

### å‡ ä½•è®¡ç®—æ¨¡å—

#### 2Då‡ ä½•è®¡ç®—
- `cm_geo_2dp_dist()` - è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»
- `cm_geo_calcu_slope()` - è®¡ç®—ä¸¤ç‚¹è¿çº¿çš„æ–œç‡
- `cm_geo_calcu_curva()` - è®¡ç®—ä¸‰ç‚¹æ„æˆçš„æ›²çº¿æ›²ç‡å’Œè½¬å‘æ–¹å‘

### å‘½ä»¤è¡Œæ¥å£

- `cm_cli_init()` - åˆå§‹åŒ–CLIå®ä¾‹
- `cm_cli_regist()` - æ³¨å†Œå‘½ä»¤
- `cm_cli_exec()` - æ‰§è¡Œå‘½ä»¤
- `cm_cli_parse()` - è§£æå‘½ä»¤è¡Œè¾“å…¥

### PIDæ§åˆ¶å™¨

#### ä½ç½®å¼æ§åˆ¶å™¨
- `cm_pid_ppid_init()` - åˆå§‹åŒ–ä½ç½®å¼PIDæ§åˆ¶å™¨
- `cm_pid_ppid_set_target()` - è®¾ç½®ä½ç½®å¼PIDç›®æ ‡å€¼
- `cm_pid_ppid_set_kp()` - è®¾ç½®ä½ç½®å¼PIDæ¯”ä¾‹ç³»æ•°
- `cm_pid_ppid_set_ki()` - è®¾ç½®ä½ç½®å¼PIDç§¯åˆ†ç³»æ•°
- `cm_pid_ppid_set_kd()` - è®¾ç½®ä½ç½®å¼PIDå¾®åˆ†ç³»æ•°
- `cm_pid_ppid_set_limit()` - è®¾ç½®ä½ç½®å¼PIDè¾“å‡ºé™å¹…
- `cm_pid_ppid_reset()` - é‡ç½®ä½ç½®å¼PIDæ§åˆ¶å™¨
- `cm_pid_ppid_deinit()` - é‡Šæ”¾ä½ç½®å¼PIDæ§åˆ¶å™¨
- `cm_pid_ppid_comput()` - ä½ç½®å¼PIDè®¡ç®—

- `cm_pid_ppd_init()` - åˆå§‹åŒ–ä½ç½®å¼PDæ§åˆ¶å™¨
- `cm_pid_ppd_set_target()` - è®¾ç½®ä½ç½®å¼PDç›®æ ‡å€¼
- `cm_pid_ppd_set_kp()` - è®¾ç½®ä½ç½®å¼PDæ¯”ä¾‹ç³»æ•°
- `cm_pid_ppd_set_kd()` - è®¾ç½®ä½ç½®å¼PDå¾®åˆ†ç³»æ•°
- `cm_pid_ppd_set_limit()` - è®¾ç½®ä½ç½®å¼PDè¾“å‡ºé™å¹…
- `cm_pid_ppd_reset()` - é‡ç½®ä½ç½®å¼PDæ§åˆ¶å™¨
- `cm_pid_ppd_deinit()` - é‡Šæ”¾ä½ç½®å¼PDæ§åˆ¶å™¨
- `cm_pid_ppd_comput()` - ä½ç½®å¼PDè®¡ç®—

#### å¢é‡å¼æ§åˆ¶å™¨
- `cm_pid_ipid_init()` - åˆå§‹åŒ–å¢é‡å¼PIDæ§åˆ¶å™¨
- `cm_pid_ipid_set_target()` - è®¾ç½®å¢é‡å¼PIDç›®æ ‡å€¼
- `cm_pid_ipid_set_kp()` - è®¾ç½®å¢é‡å¼PIDæ¯”ä¾‹ç³»æ•°
- `cm_pid_ipid_set_ki()` - è®¾ç½®å¢é‡å¼PIDç§¯åˆ†ç³»æ•°
- `cm_pid_ipid_set_kd()` - è®¾ç½®å¢é‡å¼PIDå¾®åˆ†ç³»æ•°
- `cm_pid_ipid_set_limit()` - è®¾ç½®å¢é‡å¼PIDè¾“å‡ºé™å¹…
- `cm_pid_ipid_reset()` - é‡ç½®å¢é‡å¼PIDæ§åˆ¶å™¨
- `cm_pid_ipid_deinit()` - é‡Šæ”¾å¢é‡å¼PIDæ§åˆ¶å™¨
- `cm_pid_ipid_comput()` - å¢é‡å¼PIDè®¡ç®—

- `cm_pid_ipi_init()` - åˆå§‹åŒ–å¢é‡å¼PIæ§åˆ¶å™¨
- `cm_pid_ipi_set_target()` - è®¾ç½®å¢é‡å¼PIç›®æ ‡å€¼
- `cm_pid_ipi_set_kp()` - è®¾ç½®å¢é‡å¼PIæ¯”ä¾‹ç³»æ•°
- `cm_pid_ipi_set_ki()` - è®¾ç½®å¢é‡å¼PIç§¯åˆ†ç³»æ•°
- `cm_pid_ipi_set_limit()` - è®¾ç½®å¢é‡å¼PIè¾“å‡ºé™å¹…
- `cm_pid_ipi_reset()` - é‡ç½®å¢é‡å¼PIæ§åˆ¶å™¨
- `cm_pid_ipi_deinit()` - é‡Šæ”¾å¢é‡å¼PIæ§åˆ¶å™¨
- `cm_pid_ipi_comput()` - å¢é‡å¼PIè®¡ç®—

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ GNU General Public License v3.0 å¼€æºè®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ä½œè€…

- Dreams-Possible

## ç‰ˆæœ¬å†å²

- v1.1.0 - é‡å¤§é‡æ„å’ŒåŠŸèƒ½å¢å¼º
  - é“¾è¡¨æ¨¡å—å®Œå…¨é‡æ„ä¸ºç»Ÿä¸€åŒå‘é“¾è¡¨ç»“æ„
  - æ–°å¢å‡ ä½•è®¡ç®—æ¨¡å— (cm_geo)
    - 2Dç‚¹è·ç¦»è®¡ç®—
    - æ–œç‡è®¡ç®—
    - æ›²ç‡è®¡ç®—å’Œè½¬å‘åˆ¤æ–­
  - PIDæ§åˆ¶å™¨é‡æ„ä¸ºä½ç½®å¼å’Œå¢é‡å¼
    - ä½ç½®å¼PIDæ§åˆ¶å™¨ (cm_pid_ppid)
    - ä½ç½®å¼PDæ§åˆ¶å™¨ (cm_pid_ppd)
    - å¢é‡å¼PIDæ§åˆ¶å™¨ (cm_pid_ipid)
    - å¢é‡å¼PIæ§åˆ¶å™¨ (cm_pid_ipi)

- v1.0.0 - åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - é“¾å¼æ•°æ®ç»“æ„æ¨¡å— (å•é“¾è¡¨å’ŒåŒé“¾è¡¨)
  - å‘½ä»¤è¡Œæ¥å£æ¨¡å—
  - PIDæ§åˆ¶å™¨æ¨¡å— (ç»å…¸PIDå’ŒPD)
